!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1);if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("pointcloud",{schema:{src:{type:"asset"},size:{type:"number",default:1}},multiple:!1,init:function(){if(!this.data.src)return void console.warn("HOW I'M SUPOSSED TO LOAD A POINT CLOUD WITHOUT [%s] `src` DEFINED",this.name);const e=new r;e.load(this.data.src,function(e){material=new THREE.PointsMaterial({size:this.data.size,vertexColors:THREE.VertexColors}),this.pointcloud=new THREE.Points(e,material),this.pointcloud.rotateX(-90),this.pointcloud.geometry.computeBoundingBox();const t=this.pointcloud.geometry.boundingBox;this.pointcloud.position.y+=(t.max.y-t.min.y)/2,this.el.setObject3D("pointcloud",this.pointcloud)})},remove:function(){}})},function(e,t){THREE.PLYLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.propertyNameMapping={}},THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,load:function(e,t,n,r){var i=this,a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){t(i.parse(e))},n,r)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},parse:function(e){function t(e){var t=r(n(e));return"ascii"===t.format}function n(e){for(var t=new Uint8Array(e),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n}function r(e){function t(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}var n=/ply([\s\S]*)end_header\s/,r="",i=0,a=n.exec(e);null!==a&&(r=a[1],i=a[0].length);for(var s,o,u,c={comments:[],elements:[],headerLength:i},l=r.split("\n"),p=0;p<l.length;p++){var f=l[p];if(f=f.trim(),""!==f)switch(u=f.split(/\s+/),o=u.shift(),f=u.join(" "),o){case"format":c.format=u[0],c.version=u[1];break;case"comment":c.comments.push(f);break;case"element":void 0!==s&&c.elements.push(s),s={},s.name=u[0],s.count=parseInt(u[1]),s.properties=[];break;case"property":s.properties.push(t(u,h.propertyNameMapping));break;default:console.log("unhandled",o,u)}}return void 0!==s&&c.elements.push(s),c}function i(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function a(e,t){for(var n=t.split(/\s+/),r={},a=0;a<e.length;a++)if("list"===e[a].type){for(var s=[],o=i(n.shift(),e[a].countType),u=0;u<o;u++)s.push(i(n.shift(),e[a].itemType));r[e[a].name]=s}else r[e[a].name]=i(n.shift(),e[a].type);return r}function s(e){var t,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},i=r(e),s=/end_header\s([\s\S]*)$/,c="";null!==(t=s.exec(e))&&(c=t[1]);for(var l=c.split("\n"),p=0,f=0,h=0;h<l.length;h++){var m=l[h];if(m=m.trim(),""!==m){f>=i.elements[p].count&&(p++,f=0);var d=a(i.elements[p].properties,m);u(n,i.elements[p].name,d),f++}}return o(n)}function o(e){var t=new THREE.BufferGeometry;return e.indices.length>0&&t.setIndex(e.indices),t.addAttribute("position",new THREE.Float32BufferAttribute(e.vertices,3)),e.normals.length>0&&t.addAttribute("normal",new THREE.Float32BufferAttribute(e.normals,3)),e.uvs.length>0&&t.addAttribute("uv",new THREE.Float32BufferAttribute(e.uvs,2)),e.colors.length>0&&t.addAttribute("color",new THREE.Float32BufferAttribute(e.colors,3)),t.computeBoundingSphere(),t}function u(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var r=n.vertex_indices||n.vertex_index;3===r.length?e.indices.push(r[0],r[1],r[2]):4===r.length&&(e.indices.push(r[0],r[1],r[3]),e.indices.push(r[1],r[2],r[3]))}}function c(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}}function l(e,t,n,r){for(var i,a={},s=0,o=0;o<n.length;o++)if("list"===n[o].type){var u=[];i=c(e,t+s,n[o].countType,r);var l=i[0];s+=i[1];for(var p=0;p<l;p++)i=c(e,t+s,n[o].itemType,r),u.push(i[0]),s+=i[1];a[n[o].name]=u}else i=c(e,t+s,n[o].type,r),a[n[o].name]=i[0],s+=i[1];return[a,s]}function p(e){for(var t,i={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a=r(n(e)),s="binary_little_endian"===a.format,c=new DataView(e,a.headerLength),p=0,f=0;f<a.elements.length;f++)for(var h=0;h<a.elements[f].count;h++){t=l(c,p,a.elements[f].properties,s),p+=t[1];var m=t[0];u(i,a.elements[f].name,m)}return o(i)}var f,h=this;return f=e instanceof ArrayBuffer?t(e)?s(n(e)):p(e):s(e)}}}]);